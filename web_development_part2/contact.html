<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name = "author" content = "Amanda Karjalainen, Jenna Hakkarainen, Jonna Hautakangas, Suvi Känsäkoski">
    <meta name = "description" content = "This page is part of a school project to practise making web pages. 
    The web page is about restaurant's contact information.">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <script src="https://kit.fontawesome.com/3c1fe89ab3.js" crossorigin="anonymous"></script>
    <link rel="icon" href="images/harpake.jpg">
    <title>Contact</title>

    <!--Siirretään lomakkeen tiedot PHP-tiedostolle AJAX:n ja JSON:n avulla-->
    <script>
      function sendData(form) {
      var review = new Object();
      // dokument.getElementById etsii dokumentista id:n 'stars'. Joka sattuu olemaan div, jonka sisälle star rating tähdet on pistetty.
      // 'data-stars' on käytännössä lista, joka koostuu viidestä tähdestä. Datasetilla saadaan javascriptin puolella data-alkuiset attribuutit kuten data-ratingin käyttöön.
      // dataset.stars saa täten haltuunsa sen viimeisimmän tähden arvon, jota on klikattu. Kts. javascript formin alla.
      review.star = document.getElementById('stars').dataset.stars;   
      review.nickname = form.nickname.value;
      review.email = form.email.value;
      review.age = form.age.value;
      review.guest = form.guest.value;
      review.textarea = form.textarea.value;
      
      var x = JSON.stringify(review);
      
      xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          document.getElementById("result").innerHTML = this.responseText;
          document.getElementById("reviewform").reset();
        }
      };
      xmlhttp.open("POST", "feedback.php", true);
      xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xmlhttp.send("review=" + x);	 
      }

    </script> 
</head>
<body onload = "readlatestfbinterval();">
  <!--Container alkaa-->
  <div class="container-fluid" style="position:relative;">
      
    <!--"header alkaa"-->
  
  <div class="row" style="position:sticky; top: 0px; z-index: 1;">
  
    <div class="col-12 text-center" style="background-color: white; max-height: 180px; display:inline; ">
      
      <a href="index.html"><img src="images/Ravintolanlogo5.jpeg" class="logo" alt="Bistré's logo and name"></a>

    </div>
    <!--navbar alkaa-->
    <div class="row" style="background-color:white; min-height: 15px; position: relative; bottom:0px; margin:0;">
  <div class="col">
    <nav class="navbar navbar-expand-md navbar-light">
      <button class="navbar-toggler" data-toggle="collapse" data-target="#navbarMenu">
        <span class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse justify-content-center" id="navbarMenu">
       <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="index.html" style="color:black">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="menu.html" style="color:black">Menu</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="aboutus.html" style="color:black">About us</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="book.html" style="color:black">Book a table</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="contact.html" style="color:black">Contact</a>
          </li>
		      <li class="nav-item">
                <a class="nav-link" href="userlogged.php" style="color:black">User page</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="secret/admin.html" style="color:black">Admin</a>
          </li>



        
      </ul>
    </div>
  </nav>
  
</div>
</div> <!--navbar loppuu-->
</div><!--header loppuu-->
    
            <!--Sisältö alkaa-->
            <div class="row" style="min-height: 1000px; background-color:  rgb(209, 205, 205);  border-bottom: 2px solid rgb(0, 0, 0);">
              
                <!--Vasen reuna: tyhjä column marginiksi reunustoille-->
                <div class="col-sm-2">
                
                </div>

                <!--Yhteystiedot-->
                <div class="col-sm-4" style = "margin-top: 50px; padding-right: 20px;">
                  <!--Call-->
                  <article>
                    <h2 style = "font-size: 22px;">Call us</h2>
                    <p style = "margin-bottom: 30px;">Restaurant:<br>
                      +358 10 123 4567</p>
                  </article>

                  <hr>

                  <!--Email-->
                  <article>
                    <h2 style = "font-size: 22px;">Email us</h2>
                    <p>Restaurant:<br>
                      info@bistre.fi</p>

                    <p style = "margin-bottom: 30px;">Reservations:<br>
                      reservations@bistre.fi</p>
                  </article>

                  <hr>

                  <!--Some information-->
                  <p style = "margin-bottom: 30px;"><br>You can make a table reservation by calling or emailing us.
                    It is also possible to make on our <a href="book.html" style = "color: black;">online reservation system</a>.<br><br>

                    If you would like to reserve a table for more than 8 people,
                    please call us to make the reservation.<br><br>
                    
                    On this site it is also possible to leave us a review of your experience with us.</p>

                  <hr>

                  <!--Visit-->
                  <article>
                    <h2 style = "font-size: 22px; padding-top: 20px;">Visit us</h2>
                    <p style = "margin-bottom: 30px;">Bistré<br>
                      Vankanlähde 9,<br>
                      13100 Hämeenlinna</p>
                  </article>
                </div>

                <!--Keskellä: tyhjä column marginiksi reunustoille-->
                <div class="col-sm-1">
    
                </div>

                <!--Ota yhteyttä-form-->
                <div class = "col-sm-5" style = "padding-top: 30px; padding-bottom: 50px;">

                  <h2 style = "font-size: 22px; padding-top: 20px; padding-bottom: 5px;">Rate us</h2>

                  <form class = "row g-3" id = "reviewform">
                    
                    <!--Star rating-->
                    <div class = "col-md-8">
                      <div class = "stars" id = "stars" data-stars = "5">  <!--data-stars = "num" tarkoittaa, että sivulle tultaessa on value kyseisessä tähtimäärässä.-->
                        
                        <!--Eka tähti-->
                        <svg height = "29" width = "31" id = "star" class = "star rating" data-rating = "1">
                          <polygon points = "12.37, 1.38, 4.13, 27.23, 24.75, 10.73, 0, 10.73, 20.63, 27.23"/>
                        </svg>

                        <!--Toka tähti-->
                        <svg height = "29" width = "31" id = "star" class = "star rating" data-rating = "2">
                          <polygon points = "12.37, 1.38, 4.13, 27.23, 24.75, 10.73, 0, 10.73, 20.63, 27.23"/>
                        </svg>

                        <!--Kolmas tähti-->
                        <svg height = "29" width = "31" id = "star" class = "star rating" data-rating = "3">
                          <polygon points = "12.37, 1.38, 4.13, 27.23, 24.75, 10.73, 0, 10.73, 20.63, 27.23"/>
                        </svg>

                        <!--Neljäs tähti-->
                        <svg height = "29" width = "31" id = "star" class = "star rating" data-rating = "4">
                          <polygon points = "12.37, 1.38, 4.13, 27.23, 24.75, 10.73, 0, 10.73, 20.63, 27.23"/>
                        </svg>

                        <!--Viides tähti-->
                        <svg height = "29" width = "31" id = "star" class = "star rating" data-rating = "5">
                          <polygon points = "12.37, 1.38, 4.13, 27.23, 24.75, 10.73, 0, 10.73, 20.63, 27.23"/>
                        </svg>
                      </div>
                    </div>

                    <!--Scripti tähdille: niiden klikkaus-->
                    <script>
                      const starEls = document.querySelectorAll(".star.rating");  /* Tehdään tähdistä lista. document.querySelectorAll lisää listaan kaikki, jotka mätsää annettujen arvojen kanssa */
                      starEls.forEach((star) => {   /* Käydään lista läpi for loopilla. => tehdään nimetön funktio.*/
                        star.addEventListener("click", function (e) {    /* Kun tähteä klikataan, eventListener huomaa, mitä tähteä painetaan.*/
                          var starEl = e.currentTarget;
                          starEl.parentNode.setAttribute("data-stars", starEl.dataset.rating);   /* Tähteä painaessa, EventListener antaa kyseisen tähden data-rating arvon data-starsille*/
                        });
                      });
                    </script>
                                      
                    <!--Nickame input-->
                    <div class = "col-md-8">
                      <label for = "nickname" class = "form-label">Nickname</label>
                      <input type = "text" class = "form-control" name = "nickname" id = "nickname" placeholder = "Letters from 'a' to 'z' are allowed" value = "">
                    </div><br>

                    <!--Email Address input-->
                    <div class = "col-md-8">
                      <label for = "email" class = "form-label">Email</label>
                      <input type = "text" class = "form-control" name = "email" id = "email" placeholder = "E.g. firstname.lastname@email.com" value = "">
                    </div>

                    <!--Age input-->
                    <div class = "col-md-8">
                      <label for = "age" class = "form-check-label" style = "margin-bottom: 5px;">Age</label><br>
                      <input type = "radio" class = "form-check-input" name = "age" id = "age" value = "1" checked style = "margin-bottom: 7px;"> 12-17
                      <input type = "radio" class = "form-check-input" name = "age" value = "4" style = "margin-left: 30px; margin-bottom: 7px;"> 25-39 
                      <input type = "radio" class = "form-check-input" name = "age" value = "2" style = "margin-left: 30px;"> 55-69<br>
                      <input type = "radio" class = "form-check-input" name = "age" value = "5"> 18-24 
                      <input type = "radio" class = "form-check-input" name = "age" value = "3" style = "margin-left: 30px;"> 40-54
                      <input type = "radio" class = "form-check-input" name = "age" value = "6" style = "margin-left: 30px;"> 70+<br>
                    </div>

                    <div class = "col-md-8">
                      <label for = "guest" class = "form-label">Guests</label><br>
                      <select id = "guest" class="form-select">
                        <option name = guest value = "1">1</option>
                        <option name = guest value = "2">2</option>
                        <option name = guest value = "3">3</option>
                        <option name = guest value = "4">4</option>
                        <option name = guest value = "5">5</option>
                        <option name = guest value = "6">6</option>
                        <option name = guest value = "7">7</option>
                        <option name = guest value = "8">8+</option>
                      </select>
                    </div>

                    <!--Message box-->
                    <div class = "col-md-8">
                        <label for = "textarea" class = "form-label">Feedback</label>
                        <textarea class = "form-control" name = "textarea" id = "textarea" placeholder = "Enter your feedback here" rows = "3"></textarea>
                    </div>

                    <!--Send button-->
                    <div class = "col-8" style = "margin-bottom: 10px;">
                        <button type = "button" class = "btn btn-primary active" name = "send" onclick = 'sendData(this.form);' style = "background-color: rgba(59, 59, 59, 0.897); border-color: rgb(59, 59, 59);">Send</button>
                    </div>
                  </form> 
                  
                  <!--Ottaa vastaan validointi- ja yhteysviestit-->
                  <p id = 'result'></p> 

                </div>

                <!--Oikea reuna: tyhjä column marginiksi reunustoille-->
                <div class="col-sm-2">
                
                </div>

                <div class="row">
              
                  <!--Vasen reuna: tyhjä column marginiksi reunustoille-->
                  <div class="col-sm-2">
                  
                  </div>

                  <div class = "col-sm-9">
                    <!--Ottaa vastaan tietokannasta luetut palautteet-->
                    <h2 style = "font-size: 22px; padding-top: 20px; margin-bottom: 17px;">Latest reviews</h2>
                    <p id = 'readlatest' style = "border: solid 1.5px rgb(63, 63, 63); border-radius: 7px; padding: 10px; background-color: rgb(248, 248, 248); width: 95%;"></p>

                    <!--Scripti tietokannasta tulevan tiedon päivittämiselle.-->
                    <script>
                      function readlatestfb() {
                        var xhttp = new XMLHttpRequest();

                        xhttp.onreadystatechange = function() {
                          if (this.readyState == 4 && this.status == 200) {
                            document.getElementById("readlatest").innerHTML = this.responseText;
                          }
                        };
                        xhttp.open("GET", "readfb.php", true);
                        xhttp.send();
                      }

                      // Kun sivu latautuu kutsutaan tämä funktio, joka puolestaan kutsuu readlatestfb() -funktiota 3s päästä.
                      function readlatestfbinterval() {
                        setInterval(readlatestfb, 3000);
                      }
                    </script>
                  </div>

                  <!--Oikea reuna: tyhjä column marginiksi reunustoille-->
                  <div class="col-sm-1">
                  
                  </div>

                </div>
            </div> <!--Sisältö loppuu-->

           <!--Karttaosa alkaa-->
           <div class="row" style="min-height: 200px;">
            <div class="col-md-12" style="background-color: rgb(0, 0, 0);">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1935.7748847255125!2d24.478147516051393!3d60.975818682264936!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x468e5d7e9a7c3cb9%3A0x4755965d07c467ca!2sVankanl%C3%A4hde%209%2C%2013100%20H%C3%A4meenlinna!5e0!3m2!1sfi!2sfi!4v1611845863287!5m2!1sfi!2sfi" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>
            </div>
          </div> <!--Karttaosa loppuu-->

            <!--Footer alkaa-->
            <div class="row" style="min-height: 200px; background-color: rgb(0, 0, 0); color: white; padding-top: 40px;">
        
              <!--Vasen reuna: tyhjä column visualisaation vuoksi-->
              <div class="col-sm-2">
              </div>

              <!--Contact info-->
              <div class="col-sm-3">
                <h4 style = "font-size: 20px;">CONTACT</h4>
                <p>Bistré<br>
                  Vankanlähde 9, 13101 Hämeenlinna<br>
                  Tel. +358 10 123 4567<br>
                  info@bistre.fi</p>
              </div>

              <!--Aukioloajat-->
              <div class="col-sm-3">
                <h4 style = "font-size: 20px;">OPEN</h4>
                <p>Monday-Friday:  11:00 - 22:00<br>
                  Saturday:  11:00 - 23:00<br>
                  Sunday:  12:00 - 23:00</p>
              </div>

              <!--Linkkejä: Menu-->
              <div class="col-sm-3">
                <div class="row" style = "margin-bottom: 15px;">
                  <h4 style = "font-size: 20px;">FOLLOW US ON</h4>
                  &nbsp;&nbsp;&nbsp;<a href="https://www.facebook.com/" class="fab fa-facebook"></a>
                  <a href="https://twitter.com/?lang=fi" class="fab fa-twitter"></a>
                  <a href="https://www.instagram.com/" class="fab fa-instagram"></a>
                </div>
              </div>

              <!--Oikea reuna: tyhjä column visualisaation vuoksi-->
              <div class="col-sm-2">
              </div>
            </div> <!--Footer loppuu-->
         
    </div> <!-- container loppuu-->
        
            <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>
</body>
</html>
